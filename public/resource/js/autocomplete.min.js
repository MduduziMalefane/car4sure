function autocomplete(e,t,n){var a,i=!1;function o(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),a>=e.length&&(a=0),a<0&&(a=e.length-1),e[a].classList.add("autocomplete-active")}function s(t){for(var n=document.getElementsByClassName("autocomplete-items"),a=0;a<n.length;a++)t!=n[a]&&t!=e&&n[a].parentNode.removeChild(n[a])}e.addEventListener("input",function(o){if(!i){var l,u,r=this.value;if(s(),!r||r.length<3)return!1;a=-1,l=r,u=this,i=!0,$.ajax({url:t+l,dataType:"json",type:"post",data:null,processData:!1,success:function(t,a,o){!function(t,a,o){var l,u,r;for(i=!1,(l=document.createElement("DIV")).setAttribute("id",o.id+"autocomplete-list"),l.setAttribute("class","autocomplete-items"),o.parentNode.appendChild(l),r=0;r<t.length;r++)t[r].substr(0,a.length).toUpperCase()==a.toUpperCase()&&((u=document.createElement("DIV")).innerHTML="<strong>"+t[r].substr(0,a.length)+"</strong>",u.innerHTML+=t[r].substr(a.length),u.innerHTML+=1==n?"<input type='hidden' value='"+t[r].split(",")[0]+"'>":"<input type='hidden' value='"+t[r]+"'>",u.addEventListener("click",function(t){e.value=this.getElementsByTagName("input")[0].value,s()}),l.appendChild(u))}(t,l,u)},error:function(e,t,n){i=!1}})}}),e.addEventListener("keydown",function(e){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),40==e.keyCode?(a++,o(t)):38==e.keyCode?(a--,o(t)):13==e.keyCode&&(e.preventDefault(),a>-1&&t&&t[a].click())}),document.addEventListener("click",function(e){s(e.target)})}